---
import Layout from '../../layouts/Layout.astro';
import Icon from 'astro-icon';
---

<Layout title="Wireless Series | Network Cameras">
  <!-- Product Information Section -->
  <section class="py-20 bg-gradient-to-b from-purple-50 to-white">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-4xl font-bold text-gray-900 mb-8">Wireless Series</h1>

        <!-- Replace Header Image with Carousel -->
        <div class="w-full mb-12 rounded-lg overflow-hidden shadow-lg relative">
          <div class="carousel-container w-full h-[500px] relative">
            <div class="carousel-slides flex transition-transform duration-500" style="transform: translateX(0%)">
              <div class="w-full">
                <img 
                  src="/src/assets/Wireless/heroimg0.png" 
                  alt="Wireless Series 1" 
                  class="w-full h-[500px] object-contain bg-gray-100"
                >
              </div>
              <div class="w-full">
                <img 
                  src="/src/assets/Wireless/heroimg1.png" 
                  alt="Wireless Series 2" 
                  class="w-full h-[500px] object-contain bg-gray-100"
                >
              </div>
              <div class="w-full">
                <img 
                  src="/src/assets/Wireless/heroimg2.png" 
                  alt="Wireless Series 3" 
                  class="w-full h-[500px] object-contain bg-gray-100"
                >
              </div>
            </div>
            
            <!-- Carousel Navigation Dots -->
            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
              <button class="carousel-dot w-3 h-3 rounded-full bg-purple-600 opacity-50 hover:opacity-100 transition-opacity"></button>
              <button class="carousel-dot w-3 h-3 rounded-full bg-purple-600 opacity-50 hover:opacity-100 transition-opacity"></button>
              <button class="carousel-dot w-3 h-3 rounded-full bg-purple-600 opacity-50 hover:opacity-100 transition-opacity"></button>
            </div>
          </div>
        </div>

        <!-- Hero Series Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div class="flex items-center justify-center">
            <img
              src="/src/assets/Wireless/img1.png"
              alt="Hero Series Camera"
              class="max-w-full h-auto"
            />
          </div>
          <div class="flex flex-col justify-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Hero Series</h2>
            <h3 class="text-xl text-gray-700 mb-4">Smart Shop Assistant</h3>
            <p class="text-gray-600 mb-4">
              Hero is an acronym for the House & Enterprise Remote Observe
            </p>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Proactive bidirectional call anytime, anywhere.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Focuses on what matters, reduces false alarms.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Guards the places that matter to you regularly.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                360° monitoring without blind spots.
              </li>
            </ul>
          </div>
        </div>

        <!-- Cube Series Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div class="flex flex-col justify-center order-2 md:order-1">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Cube Series</h2>
            <h3 class="text-xl text-gray-700 mb-4">Smart & Flexible Guardian</h3>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Focuses on what matters, reduces false alarms.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Protects your privacy.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Communication anytime, anywhere.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Convenient and flexible installation
              </li>
            </ul>
          </div>
          <div class="flex items-center justify-center order-1 md:order-2">
            <img
              src="/src/assets/Wireless/img2.png"
              alt="Cube Series Camera"
              class="max-w-full h-auto"
            />
          </div>
        </div>

        <!-- Picoo Series Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div class="flex items-center justify-center">
            <img
              src="/src/assets/Wireless/img3.png"
              alt="Picoo Series Camera"
              class="max-w-full h-auto"
            />
          </div>
          <div class="flex flex-col justify-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Picoo Series</h2>
            <h3 class="text-xl text-gray-700 mb-4">All-weather, All-around Protection</h3>
            <p class="text-gray-600 mb-4">
              Picoo is an acronym for PT in Camera for Outdoor Observation
            </p>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-start">
                <span class="mr-2">•</span>
                360° monitoring without blind spots.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Focuses on what matters, reduces false alarms.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Guards the places you care about regularly.(Picoo B1)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Provides instant alarms to deter intruders.
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Communication anytime, anywhere.
              </li>
            </ul>
          </div>
        </div>

        <!-- Turret Series Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div class="flex flex-col justify-center order-2 md:order-1">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Turret Series</h2>
            <h3 class="text-xl text-gray-700 mb-4">Witness & Secure Every Moment</h3>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Captures Full-color Details (-LED model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Provides Traceable Audio Details (-LED model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Multiple Night Vision Modes to Meet All Needs (-PV model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Provides Instant Alarms to Deter Intruders (-PV model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Focuses on Target, Saves Labor Costs
              </li>
            </ul>
          </div>
          <div class="flex items-center justify-center order-1 md:order-2">
            <img
              src="/src/assets/Wireless/img4.png"
              alt="Turret Series Camera"
              class="max-w-full h-auto"
            />
          </div>
        </div>

        <!-- Bullet Series Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div class="flex items-center justify-center">
            <img
              src="/src/assets/Wireless/img5.png"
              alt="Bullet Series Camera"
              class="max-w-full h-auto"
            />
          </div>
          <div class="flex flex-col justify-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Bullet Series</h2>
            <h3 class="text-xl text-gray-700 mb-4">Smart Weather-proof Guardian</h3>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Captures Full-color Details (-LED model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Provides Traceable Audio Details (-LED model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Multiple Night Vision Modes to Meet All Needs (-PV model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Provides Instant Alarms to Deter Intruders (-PV model)
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Focuses on Target, Saves Labor Costs
              </li>
              <li class="flex items-start">
                <span class="mr-2">•</span>
                Reliable and Durable
              </li>
            </ul>
          </div>
        </div>

        <!-- Product Description -->
        <div class="mb-12 text-gray-700">
          <p class="mb-6">
            With the continuous advancement of technology and changes in consumer demand, the security camera market is facing diversified demands. After a series of innovations and research, Dahua Wireless series cameras not only achieve easy installation and operation but also excellent performance and cost-effectiveness. By adopting the latest wireless technology, users can easily install and use the camera without tedious cabling, achieving true wireless. In addition, the camera is equipped with auto-tracking, human detection, privacy mode, two-way talk, smart dual light, proactive deterrence, and other functions. These cameras are widely used in small and medium-sized scenarios such as small-sized retail stores.
          </p>
          <p>
            The intelligent function of the wireless camera ensures the security and convenience of surveillance and provides users with more personalized services to meet their diversified needs and actual needs.
          </p>
        </div>

        <!-- Product Categories Tabs -->
        <div class="mb-12">
          <div class="flex flex-wrap space-x-4 border-b border-gray-200">
            {['4G Camera', 'Indoor Camera', 'Outdoor Camera'].map((category, index) => (
              <button
                class={`category-btn px-6 py-3 text-sm font-medium transition-colors duration-200 ${index === 0 ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600 hover:text-purple-600'}`}
                data-category={category}
                onclick="showCategory(event)"
              >
                {category}
              </button>
            ))}
          </div>
        </div>

        <!-- Subcategory Tabs -->
        <div class="mb-12 subcategory-tabs">
          <div class="flex flex-wrap space-x-4 border-b border-gray-200">
            {['Hero Series', 'Cube Series', 'Turret Series', 'Dome Series', 'Bullet Series', 'Picoo Series', 'Floodlight Series'].map((subcategory, index) => (
              <button
                class={`subcategory-btn px-6 py-3 text-sm font-medium transition-colors duration-200 ${index === 0 ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600 hover:text-purple-600'}`}
                data-subcategory={subcategory}
                onclick="showSubcategory(event)"
              >
                {subcategory}
              </button>
            ))}
          </div>
        </div>

        <!-- Product Grid -->
        <div class="product-grid flex flex-wrap gap-4 justify-center"></div>
      </div>
    </div>
  </section>

  <!-- How-to Videos Section -->
  <section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">How to Videos</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- Video Card 1 -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
            <a href="https://material.dahuasecurity.com/uploads/soft/20240726/01_How-to-customize-the-detection-area-(logo).mp4" target="_blank" rel="noopener noreferrer">
              <div class="relative">
                <img 
                  src="/src/assets/Wireless/video1.png" 
                  alt="Customize Detection Area"
                  class="w-full aspect-video object-cover"
                />
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300">
                  <button class="text-white bg-purple-600 rounded-full p-3 transform hover:scale-110 transition-transform duration-300">
                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1.5-11.5a1 1 0 011.5.866v6.268a1 1 0 01-1.5.866L6 12.732V7.268l2.5-1.768z" clip-rule="evenodd" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4">
                <h3 class="text-lg font-semibold text-gray-900 mb-2">How to customize the detection area</h3>
              </div>
            </a>
          </div>

          <!-- Video Card 2 -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
            <a href="https://material.dahuasecurity.com/uploads/soft/20240726/02_How-to-enable-the-push-notification-(logo).mp4" target="_blank" rel="noopener noreferrer">
              <div class="relative">
                <img 
                  src="/src/assets/Wireless/video1.png" 
                  alt="Push Notification"
                  class="w-full aspect-video object-cover"
                />
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300">
                  <button class="text-white bg-purple-600 rounded-full p-3 transform hover:scale-110 transition-transform duration-300">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1.5-11.5a1 1 0 011.5.866v6.268a1 1 0 01-1.5.866L6 12.732V7.268l2.5-1.768z" clip-rule="evenodd" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4">
                <h3 class="text-lg font-semibold text-gray-900 mb-2">How to enable the push notification</h3>
              </div>
            </a>
          </div>

          <!-- Video Card 3 -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
            <a href="https://material.dahuasecurity.com/uploads/soft/20240726/03_How-to-enable-the-pet-detection-(logo).mp4" target="_blank" rel="noopener noreferrer">
              <div class="relative">
                <img 
                  src="/src/assets/Wireless/video1.png" 
                  alt="Pet Detection"
                  class="w-full aspect-video object-cover"
                />
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300">
                  <button class="text-white bg-purple-600 rounded-full p-3 transform hover:scale-110 transition-transform duration-300">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1.5-11.5a1 1 0 011.5.866v6.268a1 1 0 01-1.5.866L6 12.732V7.268l2.5-1.768z" clip-rule="evenodd" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4">
                <h3 class="text-lg font-semibold text-gray-900 mb-2">How to enable the pet detection</h3>
              </div>
            </a>
          </div>

          <!-- Video Card 4 -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
            <a href="https://material.dahuasecurity.com/uploads/soft/20240726/04_How-to-enable-the-vehicle-detection-(logo).mp4" target="_blank" rel="noopener noreferrer">
              <div class="relative">
                <img 
                  src="/src/assets/Wireless/video1.png" 
                  alt="Vehicle Detection"
                  class="w-full aspect-video object-cover"
                />
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300">
                  <button class="text-white bg-purple-600 rounded-full p-3 transform hover:scale-110 transition-transform duration-300">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1.5-11.5a1 1 0 011.5.866v6.268a1 1 0 01-1.5.866L6 12.732V7.268l2.5-1.768z" clip-rule="evenodd" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4">
                <h3 class="text-lg font-semibold text-gray-900 mb-2">How to enable the Vehicle Detection</h3>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Add smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Hide subcategory tabs initially */
  .subcategory-tabs {
    display: none;
  }

  /* Additional styles for video cards */
  .video-card {
    cursor: pointer;
  }
  .video-card img {
    transition: transform 0.3s;
  }
  .video-card:hover img {
    transform: scale(1.05);
  }

  /* Update carousel styles */
  .carousel-container {
    overflow: hidden;
    background-color: #f3f4f6;
  }

  .carousel-slides {
    display: flex;
    width: 300%;  /* 100% for each slide */
    transform: translateX(0);
    transition: transform 0.5s ease-in-out;
  }

  .carousel-slides img {
    transition: transform 0.3s ease;
  }

  .carousel-dot.active {
    opacity: 1;
    background-color: #7c3aed;
  }
</style>

<script>
  const products = [
    // Products for 4G Camera category
    ...Array.from({ length: 5 }, (_, i) => ({
      id: `4G-${i + 1}`,
      name: `4G Camera ${i + 1}`,
      image: `/src/assets/WirelessSeries/4g${i + 1}.png`,
      category: '4G Camera',
      subcategory: ''
    })),
    // Products for Indoor Camera subcategories
    ...Array.from({ length: 6 }, (_, i) => ({
      id: `Hero-${i + 1}`,
      name: `Hero Series Camera ${i + 1}`,
      image: `/src/assets/WirelessSeries/hero${i + 1}.png`,
      subcategory: 'Hero Series',
      category: 'Indoor Camera'
    })),
    ...Array.from({ length: 2 }, (_, i) => ({
      id: `Cube-${i + 1}`,
      name: `Cube Series Camera ${i + 1}`,
      image: `/src/assets/WirelessSeries/cube${i + 1}.png`,
      subcategory: 'Cube Series',
      category: 'Indoor Camera'
    })),
    ...Array.from({ length: 5 }, (_, i) => ({
      id: `Turret-${i + 1}`,
      name: `Turret Series Camera ${i + 1}`,
      image: `/src/assets/WirelessSeries/turret${i + 1}.png`,
      subcategory: 'Turret Series',
      category: 'Indoor Camera'
    })),
    ...Array.from({ length: 2 }, (_, i) => ({
      id: `Dome-${i + 1}`,
      name: `Dome Series Camera ${i + 1}`,
      image: `/src/assets/WirelessSeries/dome${i + 1}.png`,
      subcategory: 'Dome Series',
      category: 'Indoor Camera'
    })),
    // Products for Outdoor Camera subcategories
    ...Array.from({ length: 8 }, (_, i) => ({
      id: `Bullet-${i + 1}`,
      name: `Bullet Series Camera ${i + 1}`,
      image: `/src/assets/WirelessSeries/bullet${i + 1}.png`,
      subcategory: 'Bullet Series',
      category: 'Outdoor Camera'
    })),
    ...Array.from({ length: 4 }, (_, i) => ({
      id: `Picoo-${i + 1}`,
      name: `Picoo Series Camera ${i + 1}`,
      image: `/src/assets/WirelessSeries/picoo${i + 1}.png`,
      subcategory: 'Picoo Series',
      category: 'Outdoor Camera'
    })),
    {
      id: 'Floodlight-1',
      name: 'Floodlight Series Camera 1',
      image: '/src/assets/WirelessSeries/floodlight1.png',
      subcategory: 'Floodlight Series',
      category: 'Outdoor Camera'
    }
  ];

  // Function to handle category button click
  function showCategory(event: Event) {
    const target = event.target as HTMLElement;
    if (!target) return;
    const category = target.dataset.category;
    if (category) {
      currentCategory = category;
      currentSubcategory = null;

      const subcategoryTabs = document.querySelector('.subcategory-tabs');
      if (subcategoryTabs) {
        // Show subcategory tabs for Indoor Camera
        if (category === 'Indoor Camera') {
          subcategoryTabs.innerHTML = `
            <div class="flex flex-wrap space-x-4 border-b border-gray-200">
              ${['Hero Series', 'Cube Series', 'Turret Series', 'Dome Series'].map((subcategory, index) => `
                <button
                  class="subcategory-btn px-6 py-3 text-sm font-medium transition-colors duration-200 ${index === 0 ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600 hover:text-purple-600'}"
                  data-subcategory="${subcategory}"
                  onclick="showSubcategory(event)"
                >
                  ${subcategory}
                </button>
              `).join('')}
            </div>
          `;
          (subcategoryTabs as HTMLElement).style.display = 'block';
        }
        // Show subcategory tabs for Outdoor Camera
        else if (category === 'Outdoor Camera') {
          subcategoryTabs.innerHTML = `
            <div class="flex flex-wrap space-x-4 border-b border-gray-200">
              ${['Bullet Series', 'Picoo Series', 'Floodlight Series'].map((subcategory, index) => `
                <button
                  class="subcategory-btn px-6 py-3 text-sm font-medium transition-colors duration-200 ${index === 0 ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600 hover:text-purple-600'}"
                  data-subcategory="${subcategory}"
                  onclick="showSubcategory(event)"
                >
                  ${subcategory}
                </button>
              `).join('')}
            </div>
          `;
          (subcategoryTabs as HTMLElement).style.display = 'block';
        }
        // Hide subcategory tabs for 4G Camera
        else {
          (subcategoryTabs as HTMLElement).style.display = 'none';
        }
      }
    }

    // Update UI for category buttons
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.classList.remove('text-purple-600', 'border-b-2', 'border-purple-600');
      btn.classList.add('text-gray-600');
    });
    target.classList.add('text-purple-600', 'border-b-2', 'border-purple-600');

    filterProducts();
  }

  // Function to handle subcategory button click
  function showSubcategory(event: Event) {
    const target = event.target as HTMLElement;
    if (!target) return;
    const subcategory = target.dataset.subcategory;
    if (subcategory) {
      currentSubcategory = subcategory;
    }

    // Update UI for subcategory buttons
    document.querySelectorAll('.subcategory-btn').forEach(btn => {
      btn.classList.remove('text-purple-600', 'border-b-2', 'border-purple-600');
      btn.classList.add('text-gray-600');
    });
    target.classList.add('text-purple-600', 'border-b-2', 'border-purple-600');

    filterProducts();
  }

  // Bind showCategory and showSubcategory functions to the window object
  window.showCategory = showCategory;
  window.showSubcategory = showSubcategory;

  let currentCategory = '4G Camera';
  let currentSubcategory: string | null = null;

  // Function to filter products based on current category and subcategory
  function filterProducts() {
    let filteredProducts = products.filter(product => product.category === currentCategory);
    if (currentSubcategory) {
      filteredProducts = filteredProducts.filter(product => product.subcategory === currentSubcategory);
    }
    updateProductGrid(filteredProducts);
  }

  // Function to update the product grid with filtered products
  function updateProductGrid(productList: { id: string; name: string; image: string; category: string; subcategory: string }[]) {
    const productGrid = document.querySelector('.product-grid');
    if (productGrid) {
      productGrid.innerHTML = productList.map(product => `
        <div class="flex-shrink-0 w-[300px] bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 relative">
          <!-- CCTV Icon -->
          <div class="absolute top-2 right-2 flex gap-1.5">
            <Icon name="cctv" class="w-5 h-5" />
          </div>
          
          <div class="p-4">
            <div class="aspect-square bg-gray-50 rounded-lg mb-4 flex items-center justify-center">
              <img 
                src="${product.image}" 
                alt="${product.name}"
                class="object-contain h-40 w-40 hover:scale-110 transition-transform duration-500"
              />
            </div>
            <div class="space-y-2">
              <h3 class="text-lg font-bold text-gray-900">${product.id}</h3>
              <p class="text-gray-600 text-sm line-clamp-3">${product.name}</p>
              <a 
                href="/products/${product.id}"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 mt-2 group"
              >
                View Details
                <svg class="w-4 h-4 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      `).join('');
    }
  }

  // Add event listener initialization when the document loads
  document.addEventListener('DOMContentLoaded', () => {
    // Add click event listeners to category buttons
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', (event) => window.showCategory(event));
    });

    // Add click event listeners to subcategory buttons
    document.querySelectorAll('.subcategory-btn').forEach(btn => {
      btn.addEventListener('click', (event) => window.showSubcategory(event));
    });

    // Initial filter to show default products
    filterProducts();

    initializeCarousel();
  });

  function initializeCarousel() {
    const slidesContainer = document.querySelector('.carousel-slides');
    const dots = document.querySelectorAll('.carousel-dot');
    let currentSlide = 0;
    const slideCount = dots.length;
    let isTransitioning = false;

    function updateCarousel(instant = false) {
      if (!slidesContainer) return;
      
      if (instant) {
        (slidesContainer as HTMLElement).style.transition = 'none';
      } else {
        (slidesContainer as HTMLElement).style.transition = 'transform 0.5s ease-in-out';
      }

      (slidesContainer as HTMLElement).style.transform = `translateX(-${currentSlide * 100 / slideCount}%)`;
      
      dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
      });
    }

    function nextSlide() {
      if (isTransitioning) return;
      isTransitioning = true;

      currentSlide++;
      updateCarousel();

      // If we've reached the end
      if (currentSlide >= slideCount) {
        // Wait for the transition to complete
        setTimeout(() => {
          // Reset to first slide without transition
          currentSlide = 0;
          updateCarousel(true);
          isTransitioning = false;
        }, 500); // Match this with your transition duration
      } else {
        setTimeout(() => {
          isTransitioning = false;
        }, 500);
      }
    }

    // Add click handlers to dots
    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        if (isTransitioning) return;
        currentSlide = index;
        updateCarousel();
      });
    });

    // Set first dot as active
    dots[0].classList.add('active');

    // Auto-advance slides every 5 seconds
    setInterval(nextSlide, 5000);

    // Handle transition end
    slidesContainer?.addEventListener('transitionend', () => {
      isTransitioning = false;
    });
  }
</script>